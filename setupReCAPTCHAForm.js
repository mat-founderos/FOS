function setupReCAPTCHAForm({formSelector:e,redirectFields:t=null,redirectUrl:a=null}){const r="6LcGI2grAAAAAN9XteKVEWbw1UK_Zle_0PDKpDaj",n="https://recaptchaverification.netlify.app/.netlify/functions/verify-recaptcha";function o(){document.querySelectorAll(e).forEach((e=>{const o=e.querySelector('[type="submit"]');if(!o)return;const i=o.value||o.innerText,c=e.closest(".w-form"),s=new MutationObserver((()=>{if(!c.classList.contains("w-form-loading"))if(window.grecaptcha&&grecaptcha.ready)s.disconnect();else{o.disabled=!0,"INPUT"===o.tagName?o.value="Loading ReCaptcha":o.innerText="Loading ReCaptcha";const e=setInterval((()=>{console.log("Waiting for grecaptcha to be ready..."),window.grecaptcha&&grecaptcha.ready&&grecaptcha.ready((()=>{o.disabled=!1,"INPUT"===o.tagName?o.value=i:o.innerText=i,clearInterval(e),s.disconnect()}))}),100)}}));s.observe(c,{attributes:!0,attributeFilter:["class"]}),e.addEventListener("submit",(o=>{!function(e,o){if("true"===o.dataset.skipCaptcha)return;e.preventDefault(),e.stopPropagation();const i=o.getAttribute("data-webflow-hubspot-api-form-url");o.removeAttribute("data-webflow-hubspot-api-form-url"),window.grecaptcha?grecaptcha.ready((()=>{grecaptcha.execute(r,{action:"submit"}).then((e=>{!e||e.length<10?alert("reCAPTCHA failed"):fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((e=>e.json())).then((r=>{if(!r.success)return alert("reCAPTCHA verification failed. Please try again."),void console.warn("Verification failed:",r);let n=o.querySelector('textarea[name="g-recaptcha-response"]');n||(n=document.createElement("textarea"),n.name="g-recaptcha-response",n.style.display="none",o.appendChild(n)),n.value=e;const c=()=>{o.dataset.skipCaptcha="true",o.setAttribute("data-webflow-hubspot-api-form-url",i),o.requestSubmit(),setTimeout((()=>{o.removeAttribute("data-webflow-hubspot-api-form-url")}),500)};if(!t||!a)return void c();const s=o.closest(".w-form"),l=new MutationObserver((()=>{const e=s.querySelector(".w-form-done"),r=s.querySelector(".w-form-fail");if(e&&null!==e.offsetParent){l.disconnect(),delete o.dataset.skipCaptcha;const e=new URLSearchParams;t.forEach((t=>{const a=o.querySelector(`#${t}`);a||console.warn(`Missing field with id #${t}`),e.append(t,a?.value||"")})),window.location.href=`${a}?${e}`}r&&null!==r.offsetParent&&(l.disconnect(),delete o.dataset.skipCaptcha)}));l.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),c()})).catch((e=>{console.error("Verification error:",e),alert("reCAPTCHA server error. Please try again.")}))}))})):alert("reCAPTCHA not loaded")}(o,e)}))}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}